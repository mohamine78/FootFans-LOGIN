<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1BKGCCZTMW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-1BKGCCZTMW');
    </script>

    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>FootFans - Fan first</title>
    <link rel="shortcut icon" type="image/png" href="/static/favicon.ico">


    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <!-- Bootstrap Datepicker CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
        integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <!-- Dropzone CSS -->
    <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">
    <!-- Cropper CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.css">
    <!-- JQuery CSS -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">






    <link href="/static/css/footfans-colors.css" rel="stylesheet">
    <link href="/static/css/footfans-bootstrap-components.css" rel="stylesheet">

    <link href="/static/tree_ant/css/navbar.css" rel="stylesheet">

    <link href="/static/tree_ant/css/profile_card.css" rel="stylesheet">
    <link href="/static/tree_ant/css/switch_cards.css" rel="stylesheet">
    <link href="/static/tree_ant/css/home.css" rel="stylesheet">
    <link href="/static/tree_ant/css/modal/thread_detail.css" rel="stylesheet">

</head>


<body>




    <header>
        <nav class="navbar navbar-expand-md navbar-light bg-light shadow p-0">
            <div class="container-fluid g-2">
                <a href="/" class="navbar-brand p-0">
                    <img src="/static/img/logo.png" width="70" height="70">
                </a>
                <form class="w-50 col-sm-6">

                </form>

                <div class="navbar-nav">
                    <div class="col">
                        <div class="d-flex justify-content-between justify-content-lg-end mt-lg-2">
                            <div class="nav-item mt-1 d-sm-block d-md-none">
                                <i class="nav-link bi bi-ui-checks-grid" data-bs-toggle="offcanvas"
                                    data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"
                                    style="font-size: 1.5rem; color: var(--ff-dark-blue);"></i>
                                <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasRight"
                                    aria-labelledby="offcanvasRightLabel">
                                    <div class="offcanvas-header justify-content-end m-0">
                                        <i class="bi bi-arrow-bar-left" data-bs-dismiss="offcanvas"
                                            aria-label="Close"></i>
                                    </div>
                                    <div class="offcanvas-body m-0 p-0">



                                        <div class="shadow card m-3">
                                            <div class="card-header text-center">
                                                <b>Community</b>
                                            </div>

                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="d-flex justify-content-between">
                                                        <label class="px-2" for="switch-subscriptions">My
                                                            subscriptions</label>
                                                        <div class="form-check form-switch px-2">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="switch-subscriptions">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="d-flex justify-content-between">
                                                        <label class="px-2" for="switch-subscribers">My
                                                            subscribers</label>
                                                        <div class="form-check form-switch px-2">
                                                            <input class="form-check-input" type="checkbox"
                                                                id="switch-subscribers">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>



                                        <div class="d-grid m-3">
                                            <a class="btn btn-primary ff-btn-bicolor"
                                                href="/preferences/clubs/grid/">Choose your clubs !</a>
                                        </div>



                                        <div class="shadow card m-3">
                                            <div class="card-header text-center">
                                                <b>My fan club</b>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="d-flex justify-content-between">
                                                        <a href="/mohammed-harnoufi-0671/group/fan/"
                                                            class="link-secondary text-decoration-none">
                                                            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/190px-FC_Barcelona_%28crest%29.svg.png"
                                                                class="rounded-circle" height="20" width="20">
                                                            <label class="flex-grow-1 ms-3">Barcelona</label>
                                                        </a>
                                                        <div class="form-check form-switch px-2">
                                                            <input class="form-check-input switch-fan" type="checkbox"
                                                                id="switch-fan">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>



                                        <div class="shadow card m-3">
                                            <div class="card-header text-center">
                                                <b>My rival clubs</b>
                                            </div>
                                            <div class="card-body">

                                                <div class="row mb-1">
                                                    <div class="d-flex justify-content-between">
                                                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/5/56/Real_Madrid_CF.svg/150px-Real_Madrid_CF.svg.png"
                                                            class="rounded-circle" height="20" width="20">
                                                        <label class="flex-grow-1 ms-3 px-2 d-md-none d-lg-block"
                                                            for="switch-rival-16">Real Madrid</label>
                                                        <div class="form-check form-switch px-2">
                                                            <input class="form-check-input switch-rival" type="checkbox"
                                                                id="switch-rival-16">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>



                                        <div class="shadow card m-3">
                                            <div class="card-header text-center">
                                                <b>My followed clubs</b>
                                            </div>
                                            <div class="card-body">

                                                <div class="row mb-1">
                                                    <div class="d-flex justify-content-between">
                                                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/e/eb/Manchester_City_FC_badge.svg/180px-Manchester_City_FC_badge.svg.png"
                                                            class="rounded-circle" height="20" width="20">
                                                        <label class="flex-grow-1 ms-3 px-2 d-md-none d-lg-block"
                                                            for="switch-followed-91">Manchester City</label>
                                                        <div class="form-check form-switch px-2 ">
                                                            <input class="form-check-input switch-follow"
                                                                type="checkbox" id="switch-followed-91">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div class="nav-item">
                                <a class="nav-link mt-1" href="/mohammed-harnoufi-0671" style="text-decoration: none;">


                                    <div class="position-relative">

                                        <img src="/media/img/profile_pics/Portrait_Placeholder.png" width="35"
                                            height="35"
                                            class="rounded-circle border border-1 border-white bg-white p-0 m-1 mt-0">
                                        <span
                                            class="position-absolute bottom-0 start-50  border-light rounded-circle p-0">
                                            <img class="rounded-circle border border-1 border-white bg-white m-1 p-0"
                                                height="15" width="15" src="
                    https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/190px-FC_Barcelona_%28crest%29.svg.png
                ">
                                        </span>


                                    </div>

                                </a>
                            </div>
                            <div class="nav-item mt-1">
                                <i class="nav-link bi bi-pencil-fill" data-bs-toggle="modal" data-bs-target="#baseModal"
                                    style="font-size: 1.5rem; color: var(--ff-dark-blue);">

                                </i>
                            </div>

                            <div class="nav-item mt-1">
                                <a class="nav-link" href="#"><i class="bi bi-bell-fill"
                                        style="font-size: 1.5rem; color: gray;"></i></a>
                            </div>
                            <div class="nav-item mt-1">
                                <a class="nav-link" href="#"> <i class="bi bi-people-fill"
                                        style="font-size: 1.5rem; color: gray;"></i></a>
                            </div>

                            <div class="nav-item mt-1">
                                <div class="dropdown nav-item">
                                    <div type="button" data-bs-toggle="dropdown" id="dropdownSettingsButton">
                                        <i class="nav-link bi bi-gear-fill"
                                            style="font-size: 1.5rem; color: var(--ff-dark-blue);"></i>
                                    </div>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-menu-start p-0">
                                        <a class="dropdown-item p-2" href="/settings/bio/">My bio</a>
                                        <a class="dropdown-item p-2" href="/settings/account/">My account</a>
                                        <a class="dropdown-item p-2 disabled" href="#">My notifications</a>
                                        <a class="dropdown-item p-2" href="/settings/social-media/">My social media</a>
                                        <a class="dropdown-item text-danger p-2" href="/accounts/logout/"><i
                                                class="bi bi-power"></i>&nbsp; Déconnexion</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>



    <section id="content">

        <div class="container-fluid m-0">

            <div class="p-0 m-0 rounded-2 text-center">
                <div class="mt-3 mb-0 alert alert-info alert-dismissible fade show" role="alert">
                    2022 Qatar World Cup is currently running ! <a href="/world-cup/" class="alert-link">Click here</a>
                    to join the event !
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </div>


            <div class="row">
                <div class="col-sm-3 p-0 d-none d-md-block">



                    <div class="shadow card m-3 d-sm-none d-lg-block">
                        <div class="row">
                            <div class="col-sm-5">
                                <div id="picture-bg">
                                    <a href="/mohammed-harnoufi-0671">


                                        <div class="position-relative">

                                            <img src="/media/img/profile_pics/Portrait_Placeholder.png"
                                                class="rounded-circle border border-1 border-white p-0 m-1"
                                                id="id_profile_image" height="100" width="100">
                                            <span
                                                class="position-absolute bottom-0 start-50 border-light rounded-circle p-1">
                                                <img class="rounded-circle border border-1 border-white bg-white m-0 p-0"
                                                    height="35" width="35" src="
                https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/190px-FC_Barcelona_%28crest%29.svg.png
            ">
                                            </span>


                                        </div>

                                    </a>
                                </div>
                            </div>
                            <div class="col-sm-6 offset-1 text-center">
                                <div class="row">
                                    <h5 class="pt-2 profile-name fs-5 fs-md-4">Mohammed Harnoufi</h5>
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="shadow card m-3">
                        <div class="card-header text-center">
                            <b>Community</b>
                        </div>

                        <div class="card-body">
                            <div class="row">
                                <div class="d-flex justify-content-between">
                                    <label class="px-2" for="switch-subscriptions">My subscriptions</label>
                                    <div class="form-check form-switch px-2">
                                        <input class="form-check-input" type="checkbox" id="switch-subscriptions">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="d-flex justify-content-between">
                                    <label class="px-2" for="switch-subscribers">My subscribers</label>
                                    <div class="form-check form-switch px-2">
                                        <input class="form-check-input" type="checkbox" id="switch-subscribers">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="d-grid m-3">
                        <a class="btn btn-primary ff-btn-bicolor" href="/preferences/clubs/grid/">Choose your clubs
                            !</a>
                    </div>



                    <div class="shadow card m-3">
                        <div class="card-header text-center">
                            <b>My fan club</b>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="d-flex justify-content-between">
                                    <a href="/mohammed-harnoufi-0671/group/fan/"
                                        class="link-secondary text-decoration-none">
                                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/190px-FC_Barcelona_%28crest%29.svg.png"
                                            class="rounded-circle" height="20" width="20">
                                        <label class="flex-grow-1 ms-3">Barcelona</label>
                                    </a>
                                    <div class="form-check form-switch px-2">
                                        <input class="form-check-input switch-fan" type="checkbox" id="switch-fan">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="shadow card m-3">
                        <div class="card-header text-center">
                            <b>My rival clubs</b>
                        </div>
                        <div class="card-body">

                            <div class="row mb-1">
                                <div class="d-flex justify-content-between">
                                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/5/56/Real_Madrid_CF.svg/150px-Real_Madrid_CF.svg.png"
                                        class="rounded-circle" height="20" width="20">
                                    <label class="flex-grow-1 ms-3 px-2 d-md-none d-lg-block" for="switch-rival-16">Real
                                        Madrid</label>
                                    <div class="form-check form-switch px-2">
                                        <input class="form-check-input switch-rival" type="checkbox"
                                            id="switch-rival-16">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>



                    <div class="shadow card m-3">
                        <div class="card-header text-center">
                            <b>My followed clubs</b>
                        </div>
                        <div class="card-body">

                            <div class="row mb-1">
                                <div class="d-flex justify-content-between">
                                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/e/eb/Manchester_City_FC_badge.svg/180px-Manchester_City_FC_badge.svg.png"
                                        class="rounded-circle" height="20" width="20">
                                    <label class="flex-grow-1 ms-3 px-2 d-md-none d-lg-block"
                                        for="switch-followed-91">Manchester City</label>
                                    <div class="form-check form-switch px-2 ">
                                        <input class="form-check-input switch-follow" type="checkbox"
                                            id="switch-followed-91">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>



                </div>

                <div class="col-md-6">
                    <div id="thread-list-container">


                        <link href="/static/tree_ant/css/thread.css" rel="stylesheet">






                        <script>
                            $(document).ready(function () {
                                $('[id^="galleryContainer-"]').click(function () {
                                    let threadId = $(this).attr('id').split('-')[1];
                                    $('#modal-body-gallery').load("/threads/" + threadId + "?is_modal=true")
                                });
                            });
                        </script>

                    </div>

                    <div id="loading" class="d-flex justify-content-center">
                        <img src="/static/img/infinity-animation.gif" alt="Loading..." width="50" height="50">
                    </div>
                </div>

            </div>
        </div>

    </section>



    <div class="modal fade" tabindex="-1" id="baseModal" aria-hidden="true">
        <div class="modal-dialog modal-lg">

            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>



                <div class="modal-body">


                </div>



                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-primary">Submit</button>
                </div>

            </div>

        </div>
    </div>



    <div class="modal fade" id="galleryModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content border-0">
                <div id="modal-body-gallery">
                </div>
            </div>
        </div>
    </div>
    <style>
        :root {
            --ff-dark-blue: #13007C;
            --ff-blue: #2E58A6;
            --ff-light-blue: #0488BB;
            --ff-cyan: #00A0C6;
            --ff-green: #5CB860;
        }



        :root {
            scroll-behavior: smooth;
        }

        :root {
            --bs-blue: #0d6efd;
            --bs-indigo: #6610f2;
            --bs-purple: #6f42c1;
            --bs-pink: #d63384;
            --bs-red: #dc3545;
            --bs-orange: #fd7e14;
            --bs-yellow: #ffc107;
            --bs-green: #198754;
            --bs-teal: #20c997;
            --bs-cyan: #0dcaf0;
            --bs-white: #fff;
            --bs-gray: #6c757d;
            --bs-gray-dark: #343a40;
            --bs-primary: #0d6efd;
            --bs-secondary: #6c757d;
            --bs-success: #198754;
            --bs-info: #0dcaf0;
            --bs-warning: #ffc107;
            --bs-danger: #dc3545;
            --bs-light: #f8f9fa;
            --bs-dark: #212529;
            --bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            --bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));
        }

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }

        user agent stylesheet:root {
            view-transition-name: root;
        }

        user agent stylesheet html {
            display: block;
        }

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }
    </style>



    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <!-- Bootstrap Datepicker JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"
        integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Dropzone JS -->
    <script src="https://cdn.rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>
    <!-- CROPPER JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.js"></script>
    <!-- Inifite Scroll -->
    <script src="/static/tree_ant/js/jquery.waypoints.min.js"></script>
    <script src="/static/tree_ant/js/infinite.min.js"></script>




    <script>
        $(document).ready(function () {
            $.ajaxSetup({
                beforeSend: function (xhr, settings) {
                    function getCookie(name) {
                        var cookieValue = null;
                        if (document.cookie && document.cookie != '') {
                            var cookies = document.cookie.split(';');
                            for (var i = 0; i < cookies.length; i++) {
                                var cookie = jQuery.trim(cookies[i]);
                                // Does this cookie string begin with the name we want?
                                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                    break;
                                }
                            }
                        }
                        return cookieValue;
                    }
                    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                        // Only send the token to relative URLs i.e. locally.
                        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                    }
                }
            });

            $("#thread-list-container").load("/timeline", function () {
                $(this).find('[id^="comment-"]').each(function () {
                    let commentId = $(this).attr('id').split('-')[1];
                    $(this).load('/threads/comment/' + commentId);
                });
            });

            // $("#trends").load('trends/');


            $("#baseModal").on("show.bs.modal", function (e) {
                if (e.relatedTarget.id.startsWith("delete-thread-") === true) {
                    let threadDeleteId = e.relatedTarget.id.split('-')[2];
                    $(this).find(".modal-content").load("/threads/" + threadDeleteId + '/delete');
                }
                else {
                    $(this).find(".modal-content").load("/threads/create");
                }
            });


            $('[id^="switch"]').on('click', function () {
                let idTokens = $(this).attr('id').split('-');
                let type = idTokens[1];
                let clubId = -1;

                if (idTokens.length === 3 && (type === "rival" || type === "followed")) {
                    clubId = idTokens[2];
                }

                if ($(this).is(":checked")) {
                    // This is not async because we need to ensure post is done for timeline preferences consistency
                    $.ajax({
                        csrf_token: window.CSRF_TOKEN,
                        type: "POST",
                        url: "/timeline-preferences/update",
                        async: false,
                        data: {
                            type: type,
                            id: clubId,
                            checked: true,
                            worldCup: false
                        }
                    });
                }
                else {
                    $.ajax({
                        csrf_token: window.CSRF_TOKEN,
                        type: "POST",
                        url: "/timeline-preferences/update",
                        async: false,
                        data: {
                            type: type,
                            id: clubId,
                            checked: false,
                            worldCup: false
                        }
                    });
                }

                $("#thread-list-container").load("/timeline", function () {
                    $(this).find('[id^="comment-"]').each(function () {
                        let commentId = $(this).attr('id').split('-')[1];
                        $(this).load('/threads/comment/' + commentId);
                    });
                });
            })
            var infiniteScrollEnabled = true;
            var nextPage = 2;

            console.log("nextPage is " + nextPage)
            $(window).scroll(function () {
                console.log("Here")
                if (infiniteScrollEnabled && $(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
                    infiniteScrollEnabled = false;
                    $('#loading').show();
                    $.ajax({
                        url: `/timeline?page=${nextPage}`,
                        type: 'GET',
                        success: function (data) {
                            console.log("success")
                            $('#thread-list-container').append(data);
                            infiniteScrollEnabled = data.has_next;
                            nextPage++;
                            $('#loading').hide();
                        },
                        error: function () {
                            console.log("Error")
                            infiniteScrollEnabled = true;  // Retry on error
                            $('#loading').hide();
                        }
                    });
                }
            });

            var thread = document.getElementById("threadCreateInput")
            thread.style.cursor = "pointer"
        });
    </script>





</body>

</html>